(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5490e3fa"],{"10d8":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"shared-header"}},[a("v-row",{attrs:{"no-gutters":"","align-md":"center"}},[a("v-btn",{staticClass:"mx-md-2",attrs:{text:"",fab:"",small:""},on:{click:e.util.routeBack}},[a("v-icon",[e._v("mdi-arrow-left")])],1),a("div",{staticClass:"headline mx-md-auto"},[e._v(e._s(e.title))])],1),a("v-divider")],1)},s=[],r=a("ca00"),i={name:"shared-header",props:{title:String},computed:{util:function(){return r}}},o=i,c=a("2877"),d=a("6544"),l=a.n(d),u=a("8336"),m=a("ce7e"),v=a("132d"),h=a("0fd9"),f=Object(c["a"])(o,n,s,!1,null,null,null),p=f.exports;l()(f,{VBtn:u["a"],VDivider:m["a"],VIcon:v["a"],VRow:h["a"]});t["a"]=p},"9dbe":function(e,t,a){"use strict";var n=a("ade3"),s=a("4e82"),r=a("58df"),i=a("d9bd"),o=a("2b0e"),c=o["a"].extend({props:{activeClass:String,value:{required:!1}},data:function(){return{isActive:!1}},methods:{toggle:function(){this.isActive=!this.isActive}},render:function(){return this.$scopedSlots.default?(this.$scopedSlots.default&&(e=this.$scopedSlots.default({active:this.isActive,toggle:this.toggle})),Array.isArray(e)&&1===e.length&&(e=e[0]),e&&!Array.isArray(e)&&e.tag?(e.data=this._b(e.data||{},e.tag,{class:Object(n["a"])({},this.activeClass,this.isActive)}),e):(Object(i["c"])("v-item should only contain a single element",this),e)):(Object(i["c"])("v-item is missing a default scopedSlot",this),null);var e}});Object(r["a"])(c,Object(s["a"])("itemGroup","v-item","v-item-group")).extend({name:"v-item"}),t["a"]=Object(r["a"])(c,Object(s["a"])("slideGroup")).extend({name:"v-slide-item"})},b36b:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"recognition-detail"}},[a("shared-header",{attrs:{title:e.title}}),0!==e.persons.length?a("v-card",{staticClass:"mx-md-auto",attrs:{"max-width":"90vw"}},[a("v-row",[a("v-slide-group",{staticClass:"mx-md-0"},[e._l(e.persons,(function(t,n){return[a("v-slide-item",[a("person-detail",{attrs:{img:e.util.toAvatarSrc(t.avatar),name:t.alias,time:"未检测"}})],1)]}))],2)],1)],1):e._e(),a("v-card",{staticClass:"mx-md-auto",attrs:{color:"grey lighten-5",width:"99vw",flat:""}},[a("v-row",{staticClass:"my-md-2",attrs:{"justify-md":"center","align-md":"center"}},[a("div",{staticClass:"title"},[e._v("当前已签到"+e._s(e.totalResult.length)+"人，未签到"+e._s(e.persons.length)+"人")]),a("v-chip",{staticClass:"mx-md-6",attrs:{"x-large":"",label:"",outlined:"",color:"green"},on:{click:function(t){e.attendanceShow=!e.attendanceShow}}},[a("span",[e._v(e._s(e.attendanceShow?"关闭":"展开")+"详情")]),a("v-icon",[e._v(e._s(e.attendanceShow?"mdi-arrow-down":"mdi-menu"))])],1)],1)],1),a("v-divider"),a("v-scroll-y-transition",[a("v-row",{directives:[{name:"show",rawName:"v-show",value:e.attendanceShow,expression:"attendanceShow"}],attrs:{"justify-md":"center"}},[e._l(e.totalResult,(function(t,n){return[a("v-hover",{scopedSlots:e._u([{key:"default",fn:function(s){var r=s.hover;return[a("person-detail",{key:n,attrs:{img:t.face,name:t.name,time:t.time}},[a("v-scale-transition",[r?a("v-overlay",{staticClass:"justify-center",attrs:{absolute:""}},[a("v-row",{attrs:{"justify-md":"center","align-md":"center"}},[a("v-img",{attrs:{src:t.avatar,height:"200"}}),a("v-chip",{staticClass:"white--text mt-md-1",attrs:{label:"",color:"blue lighten-3"}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-timer-outline")]),e._v("相似度 "+e._s(t.compareScore))],1)],1)],1):e._e()],1)],1)]}}],null,!0)})]})),a("v-card",{directives:[{name:"show",rawName:"v-show",value:0!=e.persons.length,expression:"persons.length!=0"}],staticClass:"mx-md-4 my-md-3",attrs:{width:"300",height:"300",flat:""}},[a("v-progress-circular",{attrs:{size:"240",width:"10",indeterminate:"",color:"purple"}},[a("span",[e._v("实时更新中。。。。。")])])],1)],2)],1)],1)},s=[],r=(a("99af"),a("7db0"),a("4160"),a("c975"),a("a434"),a("159b"),a("ca00")),i=a("e072"),o=a("ceff"),c=a("10d8"),d={name:"recognition-detail",components:{PersonDetail:o["a"],SharedHeader:c["a"]},computed:{util:function(){return r},title:function(){return"考勤详情(".concat(this.gatherName," | ").concat(this.attendanceName,")")}},data:function(){return{attendanceShow:!0,attendanceId:-1,gatherId:-1,socket:null,totalResult:[],persons:[]}},created:function(){var e=this,t=this;t.attendanceId=t.$route.params.attendanceId,t.attendanceName=t.$route.params.attendanceName,t.gatherId=t.$route.params.gatherId,t.gatherName=t.$route.params.gatherName,i["l"](t.gatherId).then((function(a){t.persons=a,t.socket=new WebSocket("ws://34.92.68.194:9999/management/publish/".concat(e.attendanceId,"?authorization=").concat(e.$store.getters["auth/token"])),t.socket.onopen=t.onOpen,t.socket.onmessage=t.onMessage,t.socket.onerror=t.onError,t.socket.onclose=t.onClose}))},beforeDestroy:function(){this.socket.close()},methods:{onOpen:function(){console.log("建立连接")},onError:function(){this.$message("当前考勤因出错而结束","error"),r["routeBack"]()},onMessage:function(e){var t=this,a=JSON.parse(e.data);void 0===a.id?t.addDetail(a):void 0!==a.persons&&a.persons.forEach((function(e){t.addDetail(e)}))},onClose:function(){},addDetail:function(e){var t=this,a=t._.find(t.persons,{id:e.personId}),n=t._.find(t.totalResult,{id:e.personId});t._.isUndefined(a)&&t._.isUndefined(n)&&console.log("错误"),t._.isUndefined(n)?(t.totalResult.push({id:e.id,avatar:r["toAvatarSrc"](a.avatar),face:r["toFaceSrc"](e.face),name:a.alias,compareScore:e.compareScore,time:(new Date).toLocaleTimeString("cn",{hour12:!1})}),t.persons.splice(t.persons.indexOf(a),1)):t._.isUndefined(a)?(n.face=r["toFaceSrc"](e.face),n.time=(new Date).toLocaleTimeString("cn",{hour12:!1})):console.log("出错")}}},l=d,u=a("2877"),m=a("6544"),v=a.n(m),h=a("b0af"),f=a("cc20"),p=a("ce7e"),g=a("ce87"),w=a("132d"),b=a("adda"),S=a("a797"),_=a("490a"),x=a("0fd9"),k=a("0789"),y=a("7efd"),C=a("9dbe"),V=Object(u["a"])(l,n,s,!1,null,null,null),I=V.exports;v()(V,{VCard:h["a"],VChip:f["a"],VDivider:p["a"],VHover:g["a"],VIcon:w["a"],VImg:b["a"],VOverlay:S["a"],VProgressCircular:_["a"],VRow:x["a"],VScaleTransition:k["e"],VScrollYTransition:k["f"],VSlideGroup:y["b"],VSlideItem:C["a"]});t["default"]=I}}]);